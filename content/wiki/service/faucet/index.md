---
title: "Faucet"
description: "Faucet"
lead: ""
date: 2021-04-17T18:50:12.030Z
draft: false
images: []
menu:
  docs:
    parent: "service"
toc: true
service:
  name: "Faucet"
contributors: ["GogoVega","Shaquu"]
---

{{< alert icon="ðŸ‘‰" >}}If you are looking for a simple controlled Valve (motorized Valve, solenoid Valve...) see [Single Valve]({{< ref "/wiki/service/valve#single-valve" >}} "Single Valve") Service.{{< /alert >}}

{{< alert icon="â€¼ï¸" >}}This Service should be used as a **Parent Service** with Valve and Heater Cooler as a **Linked Service**.{{< /alert >}}
\
This service is used with the [Heater Cooler]({{< ref "/wiki/service/heater-cooler" >}} "Heater Cooler") Service and the [Valve]({{< ref "/wiki/service/valve" >}} "Valve") Service to either represent a Hot Water Faucet (or Shower Head) or to represent a set of Valves.

## Status Icon

Depending on the situation, the Faucet will show a different status in the Home.app:

| Faucet - Linked Valves | Home.app Shows |
| --- | --- |
| `{"Active":0}` - `{"InUse":0}` | ![Faucet Off icon](icons/small/faucet_off.png) |
| `{"Active":1}` - If all `{"InUse":0}` | ![Faucet Starting icon](icons/small/faucet_starting.png) |
| `{"Active":1}` - If any `{"InUse":1}` | ![Faucet Running icon](icons/small/faucet_running.png) |
| `{"Active":0}` - If any `{"InUse":1}` | ![Faucet Stopping icon](icons/small/faucet_stopping.png) |

## Basic principle

This is an example of a Faucet item with a single Valve.

![Basic Principle](faucet_single_valve_example.png)

Copyable Node-RED flow:

```json
[{"id":"3288f6947422b693","type":"homekit-service","z":"d57f90c91936790e","isParent":true,"hostType":"0","bridge":"fc1c5b0d.cd50f8","accessoryId":"","parentService":"","name":"Single Valve Faucet","serviceName":"Faucet","topic":"","filter":false,"manufacturer":"NRCHKB","model":"1.4.3","serialNo":"Default Serial Number","firmwareRev":"1.4.3","hardwareRev":"1.4.3","softwareRev":"1.4.3","cameraConfigVideoProcessor":"ffmpeg","cameraConfigSource":"","cameraConfigStillImageSource":"","cameraConfigMaxStreams":2,"cameraConfigMaxWidth":1280,"cameraConfigMaxHeight":720,"cameraConfigMaxFPS":10,"cameraConfigMaxBitrate":300,"cameraConfigVideoCodec":"libx264","cameraConfigAudioCodec":"libfdk_aac","cameraConfigAudio":false,"cameraConfigPacketSize":1316,"cameraConfigVerticalFlip":false,"cameraConfigHorizontalFlip":false,"cameraConfigMapVideo":"0:0","cameraConfigMapAudio":"0:1","cameraConfigVideoFilter":"scale=1280:720","cameraConfigAdditionalCommandLine":"-tune zerolatency","cameraConfigDebug":false,"cameraConfigSnapshotOutput":"disabled","cameraConfigInterfaceName":"","characteristicProperties":"{\"Active\":true}","waitForSetupMsg":false,"outputs":2,"x":350,"y":880,"wires":[["249546b17855e1a8"],[]]},{"id":"0e1576b865e502fb","type":"inject","z":"d57f90c91936790e","name":"Stopping","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":0}","payloadType":"json","x":160,"y":920,"wires":[["3288f6947422b693"]]},{"id":"f7d602ae4a658eb4","type":"inject","z":"d57f90c91936790e","name":"Starting","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1}","payloadType":"json","x":170,"y":840,"wires":[["3288f6947422b693"]]},{"id":"1bdfd569e98740bf","type":"homekit-service","z":"d57f90c91936790e","isParent":false,"hostType":"0","bridge":"","accessoryId":"","parentService":"3288f6947422b693","name":"Single Valve","serviceName":"Valve","topic":"","filter":false,"manufacturer":"NRCHKB","model":"1.4.3","serialNo":"Default Serial Number","firmwareRev":"1.4.3","hardwareRev":"1.4.3","softwareRev":"1.4.3","cameraConfigVideoProcessor":"ffmpeg","cameraConfigSource":"","cameraConfigStillImageSource":"","cameraConfigMaxStreams":2,"cameraConfigMaxWidth":1280,"cameraConfigMaxHeight":720,"cameraConfigMaxFPS":10,"cameraConfigMaxBitrate":300,"cameraConfigVideoCodec":"libx264","cameraConfigAudioCodec":"libfdk_aac","cameraConfigAudio":false,"cameraConfigPacketSize":1316,"cameraConfigVerticalFlip":false,"cameraConfigHorizontalFlip":false,"cameraConfigMapVideo":"0:0","cameraConfigMapAudio":"0:1","cameraConfigVideoFilter":"scale=1280:720","cameraConfigAdditionalCommandLine":"-tune zerolatency","cameraConfigDebug":false,"cameraConfigSnapshotOutput":"disabled","cameraConfigInterfaceName":"","characteristicProperties":"{\"Active\":true,\"InUse\":true}","waitForSetupMsg":false,"outputs":2,"x":790,"y":880,"wires":[[],[]]},{"id":"1c10364eef5d7105","type":"inject","z":"d57f90c91936790e","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":0,\"InUse\":0}","payloadType":"json","x":610,"y":780,"wires":[["1bdfd569e98740bf"]]},{"id":"5d56c765b35261db","type":"inject","z":"d57f90c91936790e","name":"Starting","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1,\"InUse\":0}","payloadType":"json","x":610,"y":820,"wires":[["1bdfd569e98740bf"]]},{"id":"6c0e2edd43ae6b31","type":"inject","z":"d57f90c91936790e","name":"Running","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1,\"InUse\":1}","payloadType":"json","x":600,"y":980,"wires":[["1bdfd569e98740bf"]]},{"id":"56d5bfda010b1362","type":"inject","z":"d57f90c91936790e","name":"Stopping","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":0,\"InUse\":1}","payloadType":"json","x":600,"y":940,"wires":[["1bdfd569e98740bf"]]},{"id":"249546b17855e1a8","type":"function","z":"d57f90c91936790e","name":"State to Valve","func":"msg.payload = {\n    \"Active\": msg.payload.Active\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":880,"wires":[["1bdfd569e98740bf"]]},{"id":"fc1c5b0d.cd50f8","type":"homekit-bridge","bridgeName":"Bridge Node-RED","pinCode":"605-37-162","port":"","advertiser":"ciao","allowInsecureRequest":false,"manufacturer":"NRCHKB","model":"1.4.3","serialNo":"Default Serial Number","firmwareRev":"1.4.3","hardwareRev":"1.4.3","softwareRev":"1.4.3","customMdnsConfig":false,"mdnsMulticast":true,"mdnsInterface":"","mdnsPort":"","mdnsIp":"","mdnsTtl":"","mdnsLoopback":true,"mdnsReuseAddr":true,"allowMessagePassthrough":true}]
```

{{< alert icon="ðŸ’¡" text="Multiple Valves can be used." />}}

## Examples

### Faucet with Heater and multiple Valves

This is an example of a Faucet item with a Heater and multiple Valves.

![Faucet with Heater and multiple Valves](faucet_with_heater_multi_valve_example.png)

Copyable Node-RED flow:

```json
[{"id":"711687f4aec7b87f","type":"homekit-service","z":"677ab7b023898f3c","isParent":true,"hostType":"0","bridge":"4a2a4fc162440a41","accessoryId":"","parentService":"","name":"Faucet","serviceName":"Faucet","topic":"","filter":false,"manufacturer":"NRCHKB","model":"1.4.3","serialNo":"Default Serial Number","firmwareRev":"1.4.3","hardwareRev":"1.4.3","softwareRev":"1.4.3","cameraConfigVideoProcessor":"ffmpeg","cameraConfigSource":"","cameraConfigStillImageSource":"","cameraConfigMaxStreams":2,"cameraConfigMaxWidth":1280,"cameraConfigMaxHeight":720,"cameraConfigMaxFPS":10,"cameraConfigMaxBitrate":300,"cameraConfigVideoCodec":"libx264","cameraConfigAudioCodec":"libfdk_aac","cameraConfigAudio":false,"cameraConfigPacketSize":1316,"cameraConfigVerticalFlip":false,"cameraConfigHorizontalFlip":false,"cameraConfigMapVideo":"0:0","cameraConfigMapAudio":"0:1","cameraConfigVideoFilter":"scale=1280:720","cameraConfigAdditionalCommandLine":"-tune zerolatency","cameraConfigDebug":false,"cameraConfigSnapshotOutput":"disabled","cameraConfigInterfaceName":"","characteristicProperties":"{\"Active\":true}","waitForSetupMsg":false,"outputs":2,"x":670,"y":220,"wires":[["0bdaa502a99b40a7"],[]]},{"id":"23062bc410529e1a","type":"homekit-service","z":"677ab7b023898f3c","isParent":false,"hostType":"0","bridge":"4a2a4fc162440a41","accessoryId":"","parentService":"711687f4aec7b87f","name":"Heater","serviceName":"HeaterCooler","topic":"","filter":false,"manufacturer":"NRCHKB","model":"1.4.3","serialNo":"Default Serial Number","firmwareRev":"1.4.3","hardwareRev":"1.4.3","softwareRev":"1.4.3","cameraConfigVideoProcessor":"ffmpeg","cameraConfigSource":"","cameraConfigStillImageSource":"","cameraConfigMaxStreams":2,"cameraConfigMaxWidth":1280,"cameraConfigMaxHeight":720,"cameraConfigMaxFPS":10,"cameraConfigMaxBitrate":300,"cameraConfigVideoCodec":"libx264","cameraConfigAudioCodec":"libfdk_aac","cameraConfigAudio":false,"cameraConfigPacketSize":1316,"cameraConfigVerticalFlip":false,"cameraConfigHorizontalFlip":false,"cameraConfigMapVideo":"0:0","cameraConfigMapAudio":"0:1","cameraConfigVideoFilter":"scale=1280:720","cameraConfigAdditionalCommandLine":"-tune zerolatency","cameraConfigDebug":false,"cameraConfigSnapshotOutput":"disabled","cameraConfigInterfaceName":"","characteristicProperties":"{\"Active\":true,\"CurrentTemperature\":true,\"CurrentHeaterCoolerState\":true,\"TargetHeaterCoolerState\":true,\"HeatingThresholdTemperature\":true}","waitForSetupMsg":false,"outputs":2,"x":810,"y":400,"wires":[[],[]]},{"id":"9339f0c70091dfb2","type":"homekit-service","z":"677ab7b023898f3c","isParent":false,"hostType":"0","bridge":"","accessoryId":"","parentService":"711687f4aec7b87f","name":"Valve 1","serviceName":"Valve","topic":"","filter":false,"manufacturer":"NRCHKB","model":"1.4.3","serialNo":"Default Serial Number","firmwareRev":"1.4.3","hardwareRev":"1.4.3","softwareRev":"1.4.3","cameraConfigVideoProcessor":"ffmpeg","cameraConfigSource":"","cameraConfigStillImageSource":"","cameraConfigMaxStreams":2,"cameraConfigMaxWidth":1280,"cameraConfigMaxHeight":720,"cameraConfigMaxFPS":10,"cameraConfigMaxBitrate":300,"cameraConfigVideoCodec":"libx264","cameraConfigAudioCodec":"libfdk_aac","cameraConfigAudio":false,"cameraConfigPacketSize":1316,"cameraConfigVerticalFlip":false,"cameraConfigHorizontalFlip":false,"cameraConfigMapVideo":"0:0","cameraConfigMapAudio":"0:1","cameraConfigVideoFilter":"scale=1280:720","cameraConfigAdditionalCommandLine":"-tune zerolatency","cameraConfigDebug":false,"cameraConfigSnapshotOutput":"disabled","cameraConfigInterfaceName":"","characteristicProperties":"{\"Active\":true,\"InUse\":true}","waitForSetupMsg":false,"outputs":2,"x":1220,"y":220,"wires":[[],[]]},{"id":"199154e6e6e7e5b8","type":"homekit-service","z":"677ab7b023898f3c","isParent":false,"hostType":"0","bridge":"","accessoryId":"","parentService":"711687f4aec7b87f","name":"Valve 2","serviceName":"Valve","topic":"","filter":false,"manufacturer":"NRCHKB","model":"1.4.3","serialNo":"Default Serial Number","firmwareRev":"1.4.3","hardwareRev":"1.4.3","softwareRev":"1.4.3","cameraConfigVideoProcessor":"ffmpeg","cameraConfigSource":"","cameraConfigStillImageSource":"","cameraConfigMaxStreams":2,"cameraConfigMaxWidth":1280,"cameraConfigMaxHeight":720,"cameraConfigMaxFPS":10,"cameraConfigMaxBitrate":300,"cameraConfigVideoCodec":"libx264","cameraConfigAudioCodec":"libfdk_aac","cameraConfigAudio":false,"cameraConfigPacketSize":1316,"cameraConfigVerticalFlip":false,"cameraConfigHorizontalFlip":false,"cameraConfigMapVideo":"0:0","cameraConfigMapAudio":"0:1","cameraConfigVideoFilter":"scale=1280:720","cameraConfigAdditionalCommandLine":"-tune zerolatency","cameraConfigDebug":false,"cameraConfigSnapshotOutput":"disabled","cameraConfigInterfaceName":"","characteristicProperties":"{\"Active\":true,\"InUse\":true}","waitForSetupMsg":false,"outputs":2,"x":1220,"y":400,"wires":[[],[]]},{"id":"20fe0dba62a756a3","type":"inject","z":"677ab7b023898f3c","name":"CurrentTemperature","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"{\"CurrentTemperature\":20}","payloadType":"json","x":600,"y":360,"wires":[["23062bc410529e1a"]]},{"id":"b48c5012ec1f3ad1","type":"inject","z":"677ab7b023898f3c","name":"CurrentHeaterCoolerState Idle","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"{\"CurrentHeaterCoolerState\":1}","payloadType":"json","x":570,"y":400,"wires":[["23062bc410529e1a"]]},{"id":"1449475b1554d031","type":"inject","z":"677ab7b023898f3c","name":"TargetHeaterCoolerState Auto","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"{\"TargetHeaterCoolerState\":0}","payloadType":"json","x":570,"y":440,"wires":[["23062bc410529e1a"]]},{"id":"4c05ffa59fc0da4e","type":"inject","z":"677ab7b023898f3c","name":"Active","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1}","payloadType":"json","x":650,"y":320,"wires":[["23062bc410529e1a"]]},{"id":"299ad19d592a6f7a","type":"inject","z":"677ab7b023898f3c","name":"HeatingThresholdTemperature 22","props":[{"p":"payload"}],"repeat":"","crontab":"","once":true,"onceDelay":"4","topic":"","payload":"{\"HeatingThresholdTemperature\":22}","payloadType":"json","x":560,"y":480,"wires":[["23062bc410529e1a"]]},{"id":"0bdaa502a99b40a7","type":"function","z":"677ab7b023898f3c","name":"Close","func":"if (msg.payload.Active == false)\n    return msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":810,"y":220,"wires":[["23062bc410529e1a"]]},{"id":"cc68b657662725c8","type":"inject","z":"677ab7b023898f3c","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":0,\"InUse\":0}","payloadType":"json","x":1050,"y":340,"wires":[["199154e6e6e7e5b8"]]},{"id":"26f774a2eb0a3bd4","type":"inject","z":"677ab7b023898f3c","name":"Starting","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1,\"InUse\":0}","payloadType":"json","x":1050,"y":380,"wires":[["199154e6e6e7e5b8"]]},{"id":"fce0d9341a4b76df","type":"inject","z":"677ab7b023898f3c","name":"Running","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1,\"InUse\":1}","payloadType":"json","x":1040,"y":460,"wires":[["199154e6e6e7e5b8"]]},{"id":"2e677a3ffa1362f1","type":"inject","z":"677ab7b023898f3c","name":"Stopping","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":0,\"InUse\":1}","payloadType":"json","x":1040,"y":420,"wires":[["199154e6e6e7e5b8"]]},{"id":"4d074bb732b4edc1","type":"inject","z":"677ab7b023898f3c","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":0,\"InUse\":0}","payloadType":"json","x":1050,"y":160,"wires":[["9339f0c70091dfb2"]]},{"id":"3916eb0e012fa548","type":"inject","z":"677ab7b023898f3c","name":"Starting","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1,\"InUse\":0}","payloadType":"json","x":1050,"y":200,"wires":[["9339f0c70091dfb2"]]},{"id":"65d4508d0a1e4e2c","type":"inject","z":"677ab7b023898f3c","name":"Running","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1,\"InUse\":1}","payloadType":"json","x":1040,"y":280,"wires":[["9339f0c70091dfb2"]]},{"id":"791fc2ec2064e526","type":"inject","z":"677ab7b023898f3c","name":"Stopping","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":0,\"InUse\":1}","payloadType":"json","x":1040,"y":240,"wires":[["9339f0c70091dfb2"]]},{"id":"088bba6041cc20a2","type":"inject","z":"677ab7b023898f3c","name":"Stopping","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":0}","payloadType":"json","x":500,"y":260,"wires":[["711687f4aec7b87f"]]},{"id":"ce43fa6f5ba11841","type":"inject","z":"677ab7b023898f3c","name":"Starting","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"Active\":1}","payloadType":"json","x":510,"y":180,"wires":[["711687f4aec7b87f"]]},{"id":"4a2a4fc162440a41","type":"homekit-bridge","bridgeName":"Bridge Node-RED","pinCode":"605-37-162","port":"","advertiser":"ciao","allowInsecureRequest":false,"manufacturer":"NRCHKB","model":"1.4.3","serialNo":"Default Serial Number","firmwareRev":"1.4.3","hardwareRev":"1.4.3","softwareRev":"1.4.3","customMdnsConfig":false,"mdnsMulticast":true,"mdnsInterface":"","mdnsPort":"","mdnsIp":"","mdnsTtl":"","mdnsLoopback":true,"mdnsReuseAddr":true,"allowMessagePassthrough":true}]
```

{{< alert icon="ðŸ’¡" text="This example is a Basic Principle, it does not contain any logical nodes." />}}
